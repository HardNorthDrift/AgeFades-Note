# 硅谷 - Shell

## Shell 概述

​	Shell 是一个命令行解释器，它接收应用程序/用户命令，然后调用操作系统内核。

## Shell 解析器

```shell
cat /etc/shells # 展示系统所有 Shell，CentOS 默认为 /bin/bash
				# /bin/sh -> bash  软连接的关系
```

## Shell 变量

### 	常用系统变量

```shell
echo $HOME # 输出当前用户的家目录
set # 显示当前 Shell 中所有变量

```

### 	自定义变量

#### 		基本语法

​			定义变量 : 变量=值

​			撤销变量 : unset 变量

​			声明静态变量 : readonly 变量 ，不能 unset

#### 		变量命名规则

​			变量名称可以由字母、数组、下划线组成，但是不能以数字开头，环境变量名建议大写。

​			等号两侧不能有空格

​			在 bash 中，变量默认类型都是字符串类型，无法直接进行数值运算。

​			变量的值如果有空格，需要使用引号括起来。

#### 		案例​		

```shell
A=5	# 定义变量
A=8 # 给变量重新赋值
unset A # 撤销变量
readonly B=2 # 声明静态变量，不能 unset
C='I love you' # 变量有空格需要引起来
export C # 将变量提升为全局变量
echo $A
```

### 	特殊变量 $n

#### 		基本语法

​			n 为数字，$0 代表改脚本名称 1-9 表示第一到第九个参数，10 以上的参数需要大括号 {10} ​	

#### 		案例

```shell
vim test.sh
#!/bin/bash
echo "$0 $1 $2 $3"
sh test.sh we are family
# 结果 : test.sh we are family
```

### 	特殊变量 $#

#### 		基本语法

​			获取所有输入参数个数、常用于循环

#### 		案例

```shell
vim test.sh
#!/bin/bash
echo $#
sh test.sh xixi haha
# 结果 2
```

### ​	特殊变量 $*

#### 		基本语法

​			代表命令行中所有的参数，$* 把所有的参数看成一个整体

### ​	特殊变量 $@

#### 		基本语法

​			代表命令行中所有的参数，$* 把所有的参数区分看待

### 	特殊变量 $?

#### 		基本语法

​			最后一次执行命令的返回状态，0 证明上个命令正确执行，否则不正确。

```shell
sh test.sh
echo $?
# test.sh 正确执行则输出0，否则不正确。
```

## ​Shell 运算符

### 	基本语法

```shell
$((运算式)) # or $[运算式]
```

### 	案例

```shell
expr 2 + 3 # 5
expr `expr 2 + 3` \* 4 # 20
S=$[(2+3)*4] # 20
```

## Shell 条件判断

### 	基本语法

​		[ condition ]     注意 condition 前后要有空格，条件非空即为 true，否则 false​	

### 	常用判断条件

#### 		两个整数之间比较

```shell
 -lt # 小于
 -le # 小于等于
 -eq # 等于
 -gt # 大于
 -ge # 大于等于
 -ne # 不等于
```

#### 		按照文件权限进行判断

```shell
-r # 有读的权限 
-w # 有写的权限
-x # 有执行的权限
```

#### 		按照文件类型进行判断

```shell
-f # 文件存在并且是一个常规的文件
-e # 文件存在
-d # 文件存在并且是一个目录
```

#### 		多条件判断

```shell
[ 2 -lt 3 ] && echo OK || echo notOk # && 前一条命令执行成功时，执行下一条命令
									 # || 表示上一条命令执行失败后，执行下一条命令
```

## 流程控制

### 	if 判断

```shell

```

